<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Roguelike 重构版 v2.0</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="game-root">
        <div class="game-container">
        <main class="game-main">
            <section class="game-left">
                <div class="map-container">
                    <canvas id="game-canvas" width="600" height="600"></canvas>
                    <!-- 技能点指示器 -->
                    <div id="skill-point-ui" class="skill-point-ui" style="display: none;">
                        <div class="key-e-icon">E</div>
                        <div class="skill-text">升级</div>
                        <div class="skill-count" id="skill-count-ui">(0)</div>
                    </div>
                </div>
                <div class="controls">
                    <div class="control-hint">使用 WASD 移动，E 键打开升级菜单</div>
                </div>
            </section>

            <section class="game-right">
                <div class="panel player-panel">
                    <h2>角色状态 <span id="level" style="font-size: 0.8em; opacity: 0.8;">Lv.1</span></h2>
                    <div class="stat-row">
                        <span>氧气（生命值）：</span>
                        <div class="health-bar">
                            <div class="health-fill" id="health-fill"></div>
                        </div>
                        <span id="health-text">100/100</span>
                    </div>

                    <div class="stat-row">
                        <span>充能进度（经验）：</span>
                        <div class="exp-bar">
                            <div class="exp-fill" id="exp-fill"></div>
                        </div>
                        <span id="exp">0/10</span>
                    </div>
                    <div class="stat-row"><span>能源（技能点）：</span><span id="skill-points">0</span></div>
                    <div class="stat-row"><span>力量：</span><span id="strength">50</span></div>
                    <div class="stat-row"><span>智力：</span><span id="intelligence">50</span></div>
                    <div class="stat-row"><span>防御力：</span><span id="defense">2</span></div>
                    <div class="stat-row"><span>金币：</span><span id="gold">0</span></div>
                    <div class="stat-row"><span>距离：</span><span id="floor">0</span></div>
                </div>

                <div class="panel weapon-panel">
                    <h2>角色武器</h2>
                    <div class="weapon-grid" id="weapon-grid">
                        <!-- 由 JS 动态填充 -->
                    </div>
                </div>

                <div class="panel inventory-panel">
                    <h2>背包</h2>
                    <div class="inventory-grid" id="inventory">
                        <!-- 由 JS 动态填充 -->
                    </div>
                </div>

                <div class="panel log-panel">
                    <h2>日志</h2>
                    <div class="log-content" id="log-content"></div>
                </div>
            </section>
        </main>

        <!-- 升级菜单 -->
        <div class="overlay" id="upgrade-overlay" style="display:none;">
            <div class="dialog upgrade-dialog">
                <h2 id="upgrade-title">选择一项武器</h2>
                <div class="upgrade-options" id="upgrade-options">
                    <!-- 由 JS 动态填充 -->
                </div>
            </div>
        </div>

        <!-- 宝箱菜单 -->
        <div class="overlay" id="chest-menu" style="display:none;">
            <div class="dialog chest-dialog">
                <h2>宝箱奖励</h2>
                <div id="chest-options" class="reward-options"></div>
            </div>
        </div>

        <!-- 宝箱奖励 -->
        <div class="overlay" id="fusion-overlay" style="display:none;">
            <div class="dialog fusion-dialog">
                <div class="fusion-header">
                    <h2 id="fusion-title">武器进化</h2>
                    <button id="fusion-back-btn" class="btn-muted fusion-back-btn">返回</button>
                </div>
                <div id="fusion-options" class="fusion-options"></div>
                <div class="fusion-actions">
                    <button id="fusion-confirm-btn" class="btn fusion-confirm-btn">确认融合</button>
                </div>
            </div>
        </div>

        <!-- 道具详情 -->
        <div class="overlay" id="artifact-overlay" style="display:none;">
            <div class="dialog artifact-dialog">
                <div class="artifact-header">
                    <h2 id="artifact-title">道具详情</h2>
                    <button id="artifact-back-btn" class="btn-muted artifact-back-btn">返回</button>
                </div>
                <div id="artifact-content" class="artifact-content"></div>
                <div class="artifact-actions">
                    <button id="artifact-confirm-btn" class="btn artifact-confirm-btn">确认获取</button>
                </div>
            </div>
        </div>

        <!-- 游戏结束 -->
        <div class="overlay" id="game-over" style="display:none;">
            <div class="dialog death-dialog">
                <h2>你已死亡</h2>
                <p>最终距离: <span id="final-score">0</span></p>
                <p>最终等级: <span id="final-level">0</span></p>
                <button id="restart-btn" class="btn">重新开始</button>
            </div>
        </div>

        </div>
    </div>

    <!-- 基地界面 -->
    <div class="base-root" id="base-root" style="display:none;">
        <div class="dialog base-dialog">
            <div class="base-header">
                <div class="base-title">roguelike潜水探索小游戏 · 局外养成界面</div>
            </div>

            <div class="base-content">
                <div class="base-gold-row">
                    <div class="base-gold">金币：<span id="base-gold">0</span></div>
                </div>

                <div class="base-start-row">
                    <button class="btn base-start-btn" id="base-start-btn">开始潜水</button>
                </div>

                <div class="base-row">
                    <section class="base-panel base-panel-log">
                        <h3>潜水日志</h3>
                        <div class="base-summary">
                            航次 <span id="base-runs">0</span> · 最深 <span id="base-best-depth">0</span>m
                        </div>
                        <div class="base-log" id="base-log"></div>
                    </section>

                    <section class="base-panel base-panel-upgrades">
                        <h3>升级面板</h3>
                        <div class="base-upgrade-list" id="base-upgrade-list"></div>
                        <div class="base-tip" id="base-loadout-tip">升级船舱可解锁携带槽位</div>
                    </section>
                </div>

                <section class="base-panel base-panel-inventory">
                    <h3>仓库（背包）</h3>
                    <div class="base-inventory-grid" id="base-inventory-grid">
                        <div class="base-placeholder">背包系统后续开放</div>
                    </div>
                </section>
            </div>
        </div>
    </div>
<script type="module" src="js/main.js"></script>
</body>

</html>


